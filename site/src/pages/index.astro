---
import Layout from '../layouts/Layout.astro';
import Icon from '../components/Icon.astro';
import Badge from '../components/Badge.astro';

const base = import.meta.env.BASE_URL;

const MISSION_LOG = [
  {
    type: "UPLINK",
    icon: "book",
    title: "DCAT-AP-SE obligatoriska fält",
    description:
      "Ny guide om den minsta metadata du behöver innan publicering. Snabb, praktisk checklista ingår.",
    tag: "GUIDE",
    pathLabel: "/guides/dcat-ap-se-obligatoriska-falt",
    href: `${base}guides/dcat-ap-se-obligatoriska-falt/`, // byt till specifik guide när den finns
    timeLabel: "RECENT",
  },
  {
    type: "SYSTEM",
    icon: "code",
    title: "JSON Checker och formatering",
    description:
      "Validera och formatera JSON direkt i webbläsaren. Perfekt för att checka DCAT, GeoJSON och API-data innan publicering.",
    tag: "LABS",
    pathLabel: "/labs",
    href: `${base}labs/`,
    timeLabel: "RECENT",
  },
  {
    type: "CREW",
    icon: "chat",
    title: "Community diskussion: Val av metadatafält",
    description:
      "Aktiv diskussion om hur du väljer rätt metadatafält för din dataset. Se hur andra gör det.",
    tag: "DISCUSSION",
    pathLabel: "/discussions",
    href: "https://github.com/MelissaSkywalkz/open-data-orbit/discussions",
    timeLabel: "RECENT",
    external: true,
  },
];
---

<Layout title="Open Data Orbit" description="Communitydriven kunskapsbank för öppna data i Sverige.">
 <section class="hero" aria-labelledby="hero-title">
  <div class="hero-inner">
    <div class="hero-copy">
      <p class="hero-kicker mono">
        OPEN DATA ORBIT <span class="kicker-dot" aria-hidden="true">•</span> SWEDEN
      </p>

      <h1 id="hero-title" class="hero-title">
        Open Data <span class="hero-title-core">Orbit</span>
      </h1>

      <p class="hero-tagline">
        Guider, verktyg och community för öppna data i en lugn, tydlig omloppsbana.
      </p>

      <div class="hero-actions">
        <a href={`${base}guides/`} class="btn cta hero-btn primary">
          <span>Öppna Guider</span>
          <span class="btn-arrow" aria-hidden="true">→</span>
        </a>

        <a href={`${base}labs/`} class="btn secondary cta hero-btn">
          <span>Öppna Labs</span>
          <span class="btn-arrow" aria-hidden="true">→</span>
        </a>
      </div>

      <div class="hero-meta" aria-label="Status">
        <span class="telemetry">
          <span class="k mono">STATUS</span>
          <span class="v mono">IN ORBIT</span>
        </span>

        <span class="telemetry">
          <span class="k mono">MISSION</span>
          <span class="v mono">OPEN DATA</span>
        </span>

        <span class="telemetry">
          <span class="k mono">CREW</span>
          <span class="v mono">CONNECTED</span>
        </span>
      </div>

    </div>

    <aside class="hero-panel" aria-label="Quick access">
      <div class="panel-head">
        <span class="panel-title mono">QUICK ACCESS</span>
        <span class="panel-sub mono">POPULAR ROUTES</span>
      </div>

      <div class="panel-links" role="list">
        <a class="panel-link" role="listitem" href={`${base}guides/`}>
          <span class="panel-ico" aria-hidden="true"><Icon name="book" size={18} /></span>
          <span class="panel-text">
            <span class="t">Guider</span>
            <span class="d">Starta här: DCAT, metadata, publicering</span>
          </span>
          <span class="panel-arrow" aria-hidden="true">→</span>
        </a>

        <a class="panel-link" role="listitem" href={`${base}labs/`}>
          <span class="panel-ico" aria-hidden="true"><Icon name="code" size={18} /></span>
          <span class="panel-text">
            <span class="t">Labs</span>
            <span class="d">Utilities & prototyper (JSON, format, checks)</span>
          </span>
          <span class="panel-arrow" aria-hidden="true">→</span>
        </a>

        <a class="panel-link" role="listitem" href={`${base}community/`}>
          <span class="panel-ico" aria-hidden="true"><Icon name="chat" size={18} /></span>
          <span class="panel-text">
            <span class="t">Community</span>
            <span class="d">Frågor, trådar och samarbeten</span>
          </span>
          <span class="panel-arrow" aria-hidden="true">→</span>
        </a>
      </div>
    </aside>
  </div>

  <div class="glow-line"></div>

</section>

  <section class="cards-section" aria-label="Primary modules">
  <div class="cards-grid">
    <a href={`${base}guides/`} class="card-home" aria-label="Guides – Lär dig">
      <div class="card-top">
        <span class="card-kicker mono">GUIDES</span>
        <span class="card-arrow" aria-hidden="true">→</span>
      </div>

      <div class="card-head">
        <div class="card-icon"><Icon name="book" size={26} /></div>
        <h3 class="card-title">Lär dig</h3>
      </div>

      <p class="card-description">
        Utforska guider och resurser för att komma igång med öppna data.
      </p>

      <div class="card-meta">
        <Badge label="READY" variant="launch" icon="rocket" />
        <span class="card-route mono">/guides</span>
      </div>
    </a>

    <a href={`${base}labs/`} class="card-home" aria-label="Labs – Bygg">
      <div class="card-top">
        <span class="card-kicker mono">LABS</span>
        <span class="card-arrow" aria-hidden="true">→</span>
      </div>

      <div class="card-head">
        <div class="card-icon"><Icon name="code" size={26} /></div>
        <h3 class="card-title">Bygg</h3>
      </div>

      <p class="card-description">
        Testa verktyg, bygg prototyper och lansera idéer i Labs.
      </p>

      <div class="card-meta">
        <Badge label="UTILITY" variant="terminal" icon="terminal" />
        <span class="card-route mono">/labs</span>
      </div>
    </a>

    <a href={`${base}community/`} class="card-home" aria-label="Community – Fråga och dela">
      <div class="card-top">
        <span class="card-kicker mono">COMMUNITY</span>
        <span class="card-arrow" aria-hidden="true">→</span>
      </div>

      <div class="card-head">
        <div class="card-icon"><Icon name="chat" size={26} /></div>
        <h3 class="card-title">Fråga &amp; Dela</h3>
      </div>

      <p class="card-description">
        Ställ frågor, dela kunskap och koppla upp dig med communityn.
      </p>

      <div class="card-meta">
        <Badge label="COMMS" variant="comms" icon="antenna" />
        <span class="card-route mono">/community</span>
      </div>
    </a>
  </div>
</section>

<section class="mission-log" aria-labelledby="mission-log-title">
  <div class="mission-log-head">
    <div>
      <h2 id="mission-log-title" class="mission-log-title">Mission Log</h2>
      <p class="mission-log-subtitle">
        Vad händer i orbit just nu? Nya guider, verktyg och diskussioner från communityt.
      </p>
    </div>

    <a
      class="btn secondary cta mission-log-cta"
      href="https://github.com/MelissaSkywalkz/open-data-orbit/discussions"
      target="_blank"
      rel="noopener"
    >
      Gå till Discussions →
    </a>
  </div>

  <div class="mission-log-card" role="list">
    {MISSION_LOG.map((item) => (
      <a
        class="log-item"
        role="listitem"
        href={item.href}
        target={item.external ? "_blank" : undefined}
        rel={item.external ? "noopener" : undefined}
        data-type={item.type}
        aria-label={`${item.type}: ${item.title}`}
      >
        <div class="log-rail" aria-hidden="true">
          <span class="log-dot"></span>
        </div>

        <div class="log-body">
          <div class="log-header">
            <span class="log-type mono">{item.type}</span>
            <span class="log-time mono">{item.timeLabel}</span>
          </div>

          <div class="log-title-row">
            <span class="log-ico" aria-hidden="true"><Icon name={item.icon} size={18} /></span>
            <span class="log-title">{item.title}</span>
            <span class="log-arrow mono" aria-hidden="true">→</span>
          </div>

          <p class="log-desc">{item.description}</p>

          <div class="log-meta mono">
            <span class="log-tag">{item.tag}</span>
            <span class="log-path">{item.pathLabel}</span>
          </div>
        </div>
      </a>
    ))}
  </div>
</section>
</Layout>

<style>
/* --- Hero: quiet, professional, GitHub-ish + space --- */
.hero{
  padding: var(--spacing-2xl) 0 var(--spacing-xl) 0;
}

.hero-inner{
  display:grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap: var(--spacing-xl);
  align-items: start;
}

.hero-copy{
  text-align: left;
}

.hero-kicker{
  margin: 0 0 10px 0;
  font-size: 0.78rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: rgba(88,166,255,0.78);
}

.kicker-dot{
  display:inline-block;
  margin: 0 8px;
  opacity: 0.6;
}

.hero-title{
  margin: 0 0 var(--spacing-sm) 0;
  font-family: var(--font-display);
  font-weight: 900;
  letter-spacing: 0.03em;
  text-shadow: 0 18px 70px rgba(88,166,255,0.14);
}

.hero-title-core{
  color: rgba(230,237,243,0.95);
}

.hero-tagline{
  margin: 0 0 var(--spacing-lg) 0;
  max-width: 62ch;
  color: rgba(230,237,243,0.72);
  line-height: 1.75;
  text-shadow: none;
}

.hero-actions{
  display:flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: var(--spacing-md);
}

.hero-actions .hero-btn{
  min-width: 150px;
  padding: 10px 16px;
  border-radius: 14px;
  font-size: 0.95rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.hero-actions .hero-btn.primary{
  background: linear-gradient(
    180deg,
    rgba(31,111,235,0.20),
    rgba(31,111,235,0.12)
  );
  border-color: rgba(88,166,255,0.28);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    0 10px 30px rgba(0,0,0,0.25);
}

.hero-actions .hero-btn.primary:hover{
  background: linear-gradient(
    180deg,
    rgba(31,111,235,0.26),
    rgba(31,111,235,0.16)
  );
  border-color: rgba(88,166,255,0.40);
}

.hero-actions .hero-btn.secondary{
  background: rgba(13,17,23,0.18);
  border-color: rgba(255,255,255,0.10);
}

.hero-actions .hero-btn.secondary:hover{
  background: rgba(13,17,23,0.28);
  border-color: rgba(255,255,255,0.18);
}

.btn-arrow{
  font-family: var(--font-mono);
  font-size: 0.85em;
  opacity: 0.75;
  transition: transform 140ms ease, opacity 140ms ease;
}

.hero-actions .hero-btn:hover .btn-arrow{
  transform: translateX(2px);
  opacity: 1;
}

/* Telemetry: tillbaka till “k / v” med olika färg */
.hero-meta{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 10px;
}

.telemetry{
  display:inline-flex;
  align-items: baseline;
  gap: 10px;
  padding: 7px 12px;
  border-radius: 999px;
  border: 1px solid rgba(88,166,255,0.14);
  background: rgba(13,17,23,0.18);
}

.telemetry .k{
  font-size: 0.70rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: rgba(88,166,255,0.78);
  font-weight: 900;
}

.telemetry .v{
  font-size: 0.78rem;
  letter-spacing: 0.10em;
  text-transform: uppercase;
  color: rgba(230,237,243,0.78);
  font-weight: 700;
}

/* --- Right panel --- */
.hero-panel{
  position: relative;
  overflow:hidden;
  border-radius: var(--radius);
  background: rgba(22,27,34,0.62);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 14px 40px rgba(0,0,0,0.22);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  padding: 14px;
}

.hero-panel::before{
  content:"";
  position:absolute;
  inset:-1px;
  pointer-events:none;
  border-radius: inherit;
  background: radial-gradient(120% 80% at 20% -20%, rgba(88,166,255,0.10), transparent 60%);
  opacity: 0.9;
}

.panel-head{
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  padding: 6px 6px 10px 6px;
  position: relative;
  z-index: 1;
}

.panel-title{
  font-size: 0.72rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: rgba(88,166,255,0.85);
  font-weight: 900;
}

.panel-sub{
  font-size: 0.72rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(230,237,243,0.45);
}

.panel-links{
  display:flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
  z-index: 1;
}

.panel-link{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 12px 12px;
  border-radius: 12px;
  text-decoration: none;
  color: inherit;
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(13,17,23,0.14);
  transition: transform 140ms ease, border-color 160ms ease, background 160ms ease;
}

.panel-link:hover{
  transform: translateY(-1px);
  border-color: rgba(88,166,255,0.18);
  background: rgba(13,17,23,0.24);
}

.panel-ico{
  width: 30px;
  height: 30px;
  display:grid;
  place-items:center;
  border-radius: 10px;
  border: 1px solid rgba(88,166,255,0.14);
  background: rgba(13,17,23,0.22);
  color: rgba(88,166,255,0.92);
  flex: 0 0 auto;
}

.panel-text{
  display:flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.panel-text .t{
  font-weight: 900;
  color: rgba(230,237,243,0.92);
}

.panel-text .d{
  color: rgba(230,237,243,0.55);
  font-size: 0.92rem;
  line-height: 1.35;
}

.panel-arrow{
  margin-left: auto;
  font-family: var(--font-mono);
  color: rgba(230,237,243,0.45);
  transition: transform 140ms ease, color 140ms ease;
}
.panel-link:hover .panel-arrow{
  transform: translateX(2px);
  color: rgba(230,237,243,0.78);
}

/* Mobile */
@media (max-width: 920px){
  .hero-inner{
    grid-template-columns: 1fr;
  }
  .hero-copy{
    text-align: center;
  }
  .hero-tagline{
    margin-left: auto;
    margin-right: auto;
  }
  .hero-actions{
    justify-content: center;
  }
}

.cards-section{
  margin-bottom: var(--spacing-2xl);
  padding-top: 0;
}

.cards-grid{
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--spacing-lg);
}

.card-home{
  grid-column: span 4;
  display:flex;
  flex-direction:column;
  gap: 12px;

  padding: 16px;
  border-radius: var(--radius);
  text-decoration:none;

  background: rgba(22,27,34,0.66);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 14px 40px rgba(0,0,0,0.28);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  transition: transform 140ms ease, border-color 140ms ease, background 140ms ease;
}

.card-home:hover{
  transform: translateY(-2px);
  border-color: rgba(88,166,255,0.22);
  background: rgba(22,27,34,0.74);
}

.card-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.card-kicker{
  font-size: 0.74rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: rgba(88,166,255,0.85);
}

.card-arrow{
  font-family: var(--font-mono);
  color: rgba(230,237,243,0.50);
  transition: transform 140ms ease, color 140ms ease;
}
.card-home:hover .card-arrow{
  transform: translateX(2px);
  color: rgba(230,237,243,0.78);
}

.card-head{
  display:flex;
  align-items:center;
  gap: 10px;
  margin-top: 2px;
}

.card-icon{
  width: 34px;
  height: 34px;
  display:grid;
  place-items:center;
  border-radius: 10px;
  border: 1px solid rgba(88,166,255,0.16);
  background: rgba(13,17,23,0.22);
  color: rgba(88,166,255,0.92);
}

.card-title{
  margin: 0;
  font-size: 1.05rem;
  font-weight: 800;
  letter-spacing: 0.01em;
  color: rgba(230,237,243,0.95);
}

.card-description{
  margin: 0;
  color: rgba(230,237,243,0.70);
  line-height: 1.65;
}

.card-meta{
  display:flex;
  align-items:center;
  gap: 10px;
  margin-top: auto;
  padding-top: 6px;
  border-top: 1px solid rgba(255,255,255,0.06);
  opacity: 0.92;
}

.card-meta .badge{
  transform: scale(0.95);
  transform-origin: left center;
}

.card-route{
  font-size: 0.68rem;
  letter-spacing: 0.12em;
  opacity: 0.9;
  text-transform: uppercase;
  color: rgba(230,237,243,0.52);
}

/* Responsive */
@media (max-width: 980px){
  .card-home{ grid-column: span 6; }
}
@media (max-width: 640px){
  .cards-grid{ gap: var(--spacing-md); }
  .card-home{ grid-column: span 12; padding: 14px; }
}

/* --- Mission Log: data-driven activity list --- */
.mission-log{
  margin-top: var(--spacing-2xl);
  padding-top: 0;
}

.mission-log-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap: var(--spacing-lg);
  margin-bottom: 14px;
}

.mission-log-title{ margin: 0 0 6px 0; }

.mission-log-subtitle{
  margin: 0;
  max-width: 70ch;
  color: rgba(230,237,243,0.62);
}

.mission-log-cta{
  white-space: nowrap;
  padding: 10px 14px;
  border-radius: 999px;
}

/* Card container: mindre “låda”, mer “feed” */
.mission-log-card{
  position: relative;
  border-radius: 16px;
  background: rgba(22,27,34,0.58);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 12px 36px rgba(0,0,0,0.22);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  overflow: hidden;
}

.mission-log-card::before{
  content:"";
  position:absolute;
  inset:-1px;
  pointer-events:none;
  border-radius: inherit;
  background: radial-gradient(120% 80% at 25% -25%, rgba(88,166,255,0.10), transparent 60%);
  opacity: 0.9;
}

/* Item = timeline row */
.log-item{
  display:grid;
  grid-template-columns: 16px 1fr;
  gap: 14px;
  padding: 14px 16px;
  border-top: 1px solid rgba(255,255,255,0.06);
  text-decoration: none;
  color: inherit;
  position: relative;
  z-index: 1;
  background: transparent;
  transition: background 140ms ease;
}
.log-item:first-child{ border-top: 0; }

.log-item:hover{
  background: rgba(13,17,23,0.16);
}

.log-item:focus-visible{
  outline: 2.5px solid rgba(88,166,255,0.85);
  outline-offset: -2px;
}

/* Rail + dot */
.log-rail{
  position: relative;
  display:flex;
  justify-content:center;
}
.log-rail::before{
  content:"";
  position:absolute;
  top: 0;
  bottom: 0;
  width: 1px;
  background: rgba(255,255,255,0.08);
  opacity: 0.8;
}

.log-dot{
  width: 8px;
  height: 8px;
  margin-top: 6px;
  border-radius: 999px;
  background: rgba(180,190,205,0.55);
  box-shadow: 0 0 10px rgba(180,190,205,0.15);
}

/* Type-specific signal dots */
.log-item[data-type="UPLINK"] .log-dot{
  background: rgba(88,166,255,0.85);
  box-shadow: 0 0 14px rgba(88,166,255,0.25);
}

.log-item[data-type="SYSTEM"] .log-dot{
  background: rgba(110,200,255,0.75);
  box-shadow: 0 0 14px rgba(110,200,255,0.22);
}

.log-item[data-type="CREW"] .log-dot{
  background: rgba(200,210,225,0.65);
  box-shadow: 0 0 12px rgba(200,210,225,0.18);
}

/* Body */
.log-body{
  display:flex;
  flex-direction:column;
  gap: 8px;
  min-width: 0;
}

.log-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}

/* Type som “chip” (färgas per type) */
.log-type{
  font-size: 0.70rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  font-weight: 900;
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(13,17,23,0.22);
  color: rgba(88,166,255,0.88);
}

.log-time{
  font-size: 0.70rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(230,237,243,0.45);
}

/* Titelrad */
.log-title-row{
  display:flex;
  align-items:center;
  gap: 10px;
  min-width: 0;
}

.log-ico{
  width: 30px;
  height: 30px;
  display:grid;
  place-items:center;
  border-radius: 10px;
  border: 1px solid rgba(88,166,255,0.14);
  background: rgba(13,17,23,0.20);
  color: rgba(88,166,255,0.92);
  flex: 0 0 auto;
}

.log-title{
  font-weight: 800;
  color: rgba(230,237,243,0.92);
  line-height: 1.35;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.log-arrow{
  margin-left: auto;
  color: rgba(230,237,243,0.45);
  transition: transform 140ms ease, color 140ms ease;
}
.log-item:hover .log-arrow{
  transform: translateX(2px);
  color: rgba(230,237,243,0.80);
}

/* Beskrivning lite tightare */
.log-desc{
  margin: 0;
  color: rgba(230,237,243,0.62);
  line-height: 1.55;
  max-width: 90ch;
}

/* Meta på en rad, mer “quiet” */
.log-meta{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items:center;
  padding-top: 2px;
  opacity: 0.92;
}

.log-tag{
  font-size: 0.68rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(13,17,23,0.18);
  color: rgba(230,237,243,0.72);
}

.log-path{
  font-size: 0.68rem;
  letter-spacing: 0.10em;
  text-transform: uppercase;
  color: rgba(230,237,243,0.45);
}

.log-item[data-type="UPLINK"] .log-type{
  color: rgba(88,166,255,0.92);      /* Primary orbit blue */
}

.log-item[data-type="SYSTEM"] .log-type{
  color: rgba(110,200,255,0.90);     /* Ljusare cyan */
}

.log-item[data-type="CREW"] .log-type{
  color: rgba(200,210,225,0.78);     /* Neutral silver/crew */
}

/* Mobile */
@media (max-width: 768px){
  .mission-log-head{
    flex-direction: column;
    align-items: flex-start;
  }
  .log-title{ white-space: normal; }
}
</style>