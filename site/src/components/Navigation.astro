---
export interface Props {
  title?: string;
}

const { title } = Astro.props;
const currentPath = new URL(Astro.request.url).pathname;
import Brand from './Brand.astro';
---
<header class="header">
  <nav class="nav">
    <div class="nav-brand">
      <a href="/" class="brand-link" aria-label="Open Data Orbit">
        <Brand />
        <span class="beta-pill">BETA</span>
      </a>
    </div>
    <ul class="nav-menu">
      <li>
        <a href="/" class={currentPath === '/' ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Home / Orbit -->
            <svg viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="6.5" stroke="currentColor" stroke-width="1.8"/>
              <ellipse cx="12" cy="12" rx="10" ry="4.6" stroke="currentColor" stroke-width="1.4" opacity="0.9"/>
              <circle cx="8.4" cy="10.1" r="1" fill="currentColor" opacity="0.9"/>
            </svg>
          </span>
          <span class="nav-text">Start</span>
          <span class="nav-label">HOME</span>
        </a>
      </li>

      <li>
        <a href="/guides/" class={currentPath.startsWith('/guides') ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Rocket -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M14.5 3.8c2.9.4 5.1 2.6 5.5 5.5-1.6 4.5-5.4 8.3-9.9 9.9-2.9-.4-5.1-2.6-5.5-5.5C6.2 9.2 10 5.4 14.5 3.8Z" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
              <path d="M9.2 14.8 7 17l.6 3.2L11 19l2.2-2.2" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" opacity="0.95"/>
              <circle cx="15.7" cy="8.3" r="1.2" fill="currentColor" opacity="0.95"/>
            </svg>
          </span>
          <span class="nav-text">Guider</span>
          <span class="nav-label">LAUNCH</span>
        </a>
      </li>

      <li>
        <a href="/resources/" class={currentPath === '/resources/' ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Map pin / Beacon -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 21s6-5.1 6-10.2A6 6 0 0 0 6 10.8C6 15.9 12 21 12 21Z" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
              <circle cx="12" cy="10.7" r="2.2" stroke="currentColor" stroke-width="1.7"/>
            </svg>
          </span>
          <span class="nav-text">Resurser</span>
          <span class="nav-label">ARCHIVE</span>
        </a>
      </li>

      <li>
        <a href="/labs/" class={currentPath === '/labs/' ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Terminal -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4.5 6.8h15c.8 0 1.5.7 1.5 1.5v7.4c0 .8-.7 1.5-1.5 1.5h-15c-.8 0-1.5-.7-1.5-1.5V8.3c0-.8.7-1.5 1.5-1.5Z" stroke="currentColor" stroke-width="1.7"/>
              <path d="M7.4 10.4 9.7 12l-2.3 1.6" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M11.3 13.6h4.2" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-text">Labs</span>
          <span class="nav-label">TERMINAL</span>
        </a>
      </li>

      <li>
        <a href="/community/" class={currentPath === '/community/' ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Antenna / Comms -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 13.2v7.2" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
              <path d="M8.8 20.4h6.4" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
              <path d="M9.2 13.2a3.2 3.2 0 1 1 5.6 0" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
              <path d="M6.4 9.3a7.2 7.2 0 0 1 11.2 0" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" opacity="0.9"/>
              <path d="M8.2 11.1a4.6 4.6 0 0 1 7.6 0" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" opacity="0.9"/>
            </svg>
          </span>
          <span class="nav-text">Community</span>
          <span class="nav-label">COMMS</span>
        </a>
      </li>

      <li>
        <a href="/rewards/" class={currentPath === '/rewards/' ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Star / Badge -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 3.8l2.3 5 5.5.7-4 3.7 1 5.4-4.8-2.6-4.8 2.6 1-5.4-4-3.7 5.5-.7 2.3-5Z" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="nav-text">Rewards</span>
          <span class="nav-label">BADGES</span>
        </a>
      </li>

      <li>
        <a href="/about/" class={currentPath === '/about/' ? 'nav-link active' : 'nav-link'}>
          <span class="nav-ico" aria-hidden="true">
            <!-- Crew / ID -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M9 12.3a3.2 3.2 0 1 0 0-6.4 3.2 3.2 0 0 0 0 6.4Z" stroke="currentColor" stroke-width="1.7"/>
              <path d="M3.8 20.2c.8-3 2.9-4.7 5.2-4.7s4.4 1.7 5.2 4.7" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
              <path d="M14.2 8h6" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" opacity="0.9"/>
              <path d="M14.2 12h6" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" opacity="0.9"/>
              <path d="M14.2 16h4.2" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" opacity="0.9"/>
            </svg>
          </span>
          <span class="nav-text">Om</span>
          <span class="nav-label">CREW</span>
        </a>
      </li>
    </ul>
  </nav>
</header>

<style>
.header{
  position: sticky;
  top: 0;
  z-index: 100;
  isolation: isolate;
}

/* “Instrument panel” bakom nav */
.header::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(ellipse 70% 120% at 20% 0%, rgba(31,111,235,0.18) 0%, transparent 55%),
    radial-gradient(ellipse 70% 120% at 80% 30%, rgba(44,83,100,0.16) 0%, transparent 55%),
    rgba(22,27,34,0.74);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}

/* glow line */
.header::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:-1px;
  height: 2px;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(88,166,255,0.35) 20%,
    rgba(31,111,235,0.50) 50%,
    rgba(88,166,255,0.35) 80%,
    transparent 100%);
  opacity: .85;
  pointer-events:none;
}

.nav{
  position: relative;
  max-width: unset;
  margin: 0 auto;
  padding: 14px var(--spacing-lg);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 14px;
}

.nav-brand{ flex-shrink: 0; }

.brand-link{
  display:flex;
  align-items:center;
  text-decoration:none;
  gap: 10px;
  padding: 6px 10px;
  border-radius: 14px;
  border: 1px solid transparent;
  background: rgba(13,17,23,0.10);
  transition: transform 160ms ease, border-color 160ms ease, filter 160ms ease;
}
.brand-link:hover{
  transform: translateY(-1px);
  border-color: rgba(88,166,255,0.18);
  filter: brightness(1.06);
}

/* Menu */
.nav-menu{
  display:flex;
  list-style:none;
  gap: 10px;
  margin:0;
  padding:0;
  align-items:center;
}

/* Links: pill + subtle glass */
.nav-link{
  position: relative;
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  color: rgba(230,237,243,0.70);
  text-decoration:none;
  font-size: var(--font-size-sm);
  font-weight: 700;
  letter-spacing: 0.02em;
  border: 1px solid transparent;
  background: rgba(13,17,23,0.10);
  transition: transform 160ms ease, border-color 160ms ease, color 160ms ease, filter 160ms ease, background 160ms ease;
}
.nav-link:hover{
  color: rgba(230,237,243,0.92);
  border-color: rgba(88,166,255,0.16);
  background: rgba(13,17,23,0.18);
  transform: translateY(-1px);
  filter: brightness(1.06);
}

/* Active: “powered” pill */
.nav-link.active{
  color: rgba(230,237,243,0.95);
  border-color: rgba(88,166,255,0.22);
  background:
    radial-gradient(ellipse 70% 120% at 20% 0%, rgba(31,111,235,0.18) 0%, transparent 55%),
    rgba(13,17,23,0.25);
  box-shadow: 0 0 0 2px rgba(13,17,23,0.55) inset, 0 18px 45px rgba(0,0,0,0.30);
}

/* Active “orbit underline” (subtil, inte tjock bar) */
.nav-link.active::after{
  content:"";
  position:absolute;
  left: 18%;
  right: 18%;
  bottom: 4px;
  height: 2px;
  border-radius: 999px;
  background: linear-gradient(90deg,
    rgba(88,166,255,0.0),
    rgba(88,166,255,0.55),
    rgba(31,111,235,0.70),
    rgba(88,166,255,0.55),
    rgba(88,166,255,0.0));
  opacity: .9;
}

/* Icon + label layout */
.nav-ico{
  width: 18px;
  height: 18px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  opacity: 0.95;
  color: rgba(88,166,255,0.92);
  filter: drop-shadow(0 0 10px rgba(31,111,235,0.16));
}

.nav-ico svg{
  width: 18px;
  height: 18px;
  display:block;
}

.nav-text{
  line-height: 1;
}

.nav-label{
  margin-left: 2px;
  padding: 3px 8px;
  border-radius: 999px;
  font-family: var(--font-mono);
  font-size: 0.68rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: rgba(88,166,255,0.86);
  background: rgba(13,17,23,0.22);
  border: 1px solid rgba(88,166,255,0.14);
  box-shadow: 0 0 18px rgba(31,111,235,0.10);
}

/* Hover/active: lite mer “powered” */
.nav-link:hover .nav-ico{
  color: rgba(230,237,243,0.92);
  filter: drop-shadow(0 0 12px rgba(88,166,255,0.22));
}
.nav-link.active .nav-ico{
  color: rgba(230,237,243,0.95);
}
.nav-link.active .nav-label{
  color: rgba(230,237,243,0.82);
  border-color: rgba(88,166,255,0.22);
  background: rgba(13,17,23,0.28);
}

/* Mobile: göm labels för att få plats */
@media (max-width: 700px){
  .nav-label{ display:none; }
}

/* Beta pill: mindre “sticker”, mer HUD */
.beta-pill{
  display:inline-flex;
  align-items:center;
  padding: 3px 10px;
  border-radius: 999px;
  font-family: var(--font-mono);
  font-size: 0.68rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: rgba(88,166,255,0.92);
  background: rgba(13,17,23,0.18);
  border: 1px solid rgba(88,166,255,0.18);
  box-shadow: 0 0 18px rgba(31,111,235,0.14);
  opacity: 0.9;
  position: relative;
  top: 0;
}

/* Mobile: behåll allt i en rad + scroll istället för wrap */
@media (max-width: 900px){
  .nav{
    flex-direction: column;
    align-items: stretch;
    padding: 12px var(--spacing-md);
  }
  .nav-brand{
    display:flex;
    justify-content:center;
  }

  .nav-menu{
    justify-content:flex-start;
    overflow-x:auto;
    padding: 6px 2px 10px 2px;
    gap: 8px;
    scrollbar-width: none; /* firefox */
  }
  .nav-menu::-webkit-scrollbar{ display:none; } /* chrome */
  .nav-link{ white-space: nowrap; }
}
</style>
